<html>
  <head>
    <meta charset="UTF-8">
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <style>
      nav {
        position: fixed;
        z-index: 10;
        bottom: 0;
        margin-bottom: 10px;
        width: 100%;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <nav>
      <button type="button" class="btn btn-secondary" onclick="moveCamera()">Mover cámara</button>
      <button type="button" class="btn btn-primary" onclick="addElement()">Añadir elemento</button>
    </nav>
    <a-scene cursor="rayOrigin: mouse">
        <a-camera id="myCamera" wasd-controls="acceleration: 5" position="0.5 0.6 1">
          <a-cursor></a-cursor>
        </a-camera>
        <a-box position="-1 0.5 -3" data-info="Caja azul" rotation="0 45 0" color="#4CC3D9"></a-box>
        <a-box position="1 0.5 -3" data-info="Caja roja" rotation="0 45 0" color="red" handle-events></a-box>
        <a-box id="cajaAnimada" position="-1 0.5 -5" data-info="Caja animada de color tomate" animation="property: position; to: 1 8 -10; dur: 2000; easing: linear; loop: true" color="tomato" change-color-on-hover></a-box>
        <a-sphere position="0 1.25 -5" data-info="Esfera roja" radius="1.25" color="#EF2D5E"></a-sphere>
        <a-cylinder position="1 0.75 -3" data-info="Cilindro amarillo" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
        <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>

        <a-assets>
          <a-asset-item id="human-obj" src="assets/standard-male-figure-obj/standard-male-figure.obj"></a-asset-item>
          <a-asset-item id="human-mtl" src="assets/standard-male-figure-obj/standard-male-figure.mtl"></a-asset-item>
        </a-assets>
        <a-entity position="-2 0 0" obj-model="obj: #human-obj; mtl: #human-mtl" scale="0.05 0.05 0.05"></a-entity>

        <a-assets>
          <a-asset-item id="elephant-obj" src="assets/elephant/Elephant.obj"></a-asset-item>
          <a-asset-item id="elephant-mtl" src="assets/elephant/Elephant.mtl"></a-asset-item>
        </a-assets>
        <a-entity position="-1 0 0" obj-model="obj: #elephant-obj; mtl: #elephant-mtl" scale="0.15 0.15 0.15"></a-entity>

        <a-sky color="#ECECEC" src="assets/realistic_zen_minimal_futurist.jpg"></a-sky>

    </a-scene>
  </body>
  <script>
    AFRAME.registerComponent('handle-events', {
       init: function () {
         var el = this.el;  //
         el.addEventListener('mouseenter', function () {
           console.log(el.getAttribute('data-info'));
           console.log("mouseenter");
         });
         el.addEventListener('mouseleave', function () {
             console.log(el.getAttribute('data-info'));
             console.log("mouseleave");
         });
         el.addEventListener('click', function () {
             console.log(el.getAttribute('data-info'));
             console.log("click");
             alert(el.getAttribute('data-info'));
         });
       }
    });

    function moveCamera() {
        pos = document.getElementsByTagName('a-camera')[0].getAttribute('position').z
        document.getElementsByTagName('a-camera')[0].getAttribute('position').z = pos + 1;
    }

    function addElement() {
        var scene = document.querySelector('a-scene');
        var box = document.createElement('a-box');
        box.setAttribute('position', {x: 0, y: 0.5, z: -3});
        box.setAttribute('color', 'green');
        box.setAttribute('data-info', 'Caja verde');
        box.setAttribute('handle-events', '');
        scene.appendChild(box);
    }

    AFRAME.registerComponent('change-color-on-hover', {
      schema: {
        color: {default: 'white'}
      },
      init: function () {
        // Componente que cambia el color de un objeto al pasar el mouse por encima
        var data = this.data; // Hace relación al schema
        // el objeto que tiene el componente
        var el = this.el;  // <a-box>
        var defaultColor = el.getAttribute('material').color;

        el.addEventListener('mouseenter', function () {
          el.setAttribute('color', data.color);
        });
        el.addEventListener('mouseleave', function () {
          el.setAttribute('color', defaultColor);
        });
      }
    });
  </script>

</html>